<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Zells Display</title>

    <style>
        #emitters {
            position: absolute;
            top: 0;
            left: 850px;
        }

        .emitter {
            background-color: #2f65a4;
            color: black;
            font-family: sans-serif;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 20px;

            height: 60px;
            width: 200px;

            box-sizing: border-box;
        }
    </style>
</head>
<body>

<div id="emitters">
    <div class="emitter" data-signal='{"to":"shelly","content":{"go":"forward"}}'>Go Forward</div>
    <div class="emitter" data-signal='{"to":"shelly","content":{"turn":"left"}}'>Turn Left</div>
    <div class="emitter" data-signal='{"to":"shelly","content":{"turn":"right"}}'>Turn Right</div>
</div>

<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="/bundle.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/interact.js/1.2.8/interact.min.js"></script>

<script>
    var dish = new Dish();
    dish.join(new WebSocketClientPeer(io));
    dish.put(new Display('display1'));

    function dragMoveListener(event) {
        var target = event.target,
                // keep the dragged position in the data-x/data-y attributes
                x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
                y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

        // translate the element
        target.style.webkitTransform = target.style.transform = 'translate(' + x + 'px, ' + y + 'px)';

        // update the posiion attributes
        target.setAttribute('data-x', x);
        target.setAttribute('data-y', y);
    }

    interact('.emitter')
            .draggable({
                onmove: dragMoveListener
            })
            .on('tap', function (event) {
                dish.transmit(JSON.parse(event.currentTarget.getAttribute('data-signal')));
                event.preventDefault();
            });
</script>

</body>
</html>